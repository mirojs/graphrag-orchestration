================================================================================
ğŸ§ª KNN Benchmark Test - Invoice/Contract Inconsistency Detection
================================================================================
Started: 2026-02-01 13:06:56
API: https://graphrag-orchestration.salmonhill-df6033f3.swedencentral.azurecontainerapps.io/hybrid/query
Route: DRIFT Multi-Hop (Route 4)
Query: Single comprehensive query (DRIFT auto-decomposes into sub-questions)
Groups: 4


================================================================================
ğŸ”¬ Testing: Baseline (No KNN)
================================================================================
  Group ID:         test-5pdfs-v2-enhanced-ex
  K (neighbors):    0
  Similarity Cutoff: 1.0
  KNN Edges:        0


ğŸ“ Running Ground Truth Query...
   Query: Analyze the invoice and contract documents to find all inconsistencies...
   âœ… Route: route_4_drift_multi_hop
   âœ… Ground Truth: 11/16 items detected
   ğŸ“š Citations: 9
   ğŸ“„ Response length: 20379 chars

================================================================================
ğŸ“Š Baseline (No KNN) SUMMARY
================================================================================
  Ground Truth (16 items):   11/16 (68.8%)
  Seeds Discovered:          12
  Text Chunks Used:          73
  Items Found: A1_model_mismatch, A2_payment_conflict, A3_customer_mismatch, B1_hall_call_gap, B2_door_height, B3_lock_added, B4_outdoor_term, B5_invoice_contradiction
               C2_john_doe, C6_no_change_order, C7_invoice_number

================================================================================
ğŸ”¬ Testing: KNN-1 (Conservative)
================================================================================
  Group ID:         test-5pdfs-v2-knn-1
  K (neighbors):    3
  Similarity Cutoff: 0.8
  KNN Edges:        408


ğŸ“ Running Ground Truth Query...
   Query: Analyze the invoice and contract documents to find all inconsistencies...
   âœ… Route: route_4_drift_multi_hop
   âœ… Ground Truth: 11/16 items detected
   ğŸ“š Citations: 3
   ğŸ“„ Response length: 18283 chars

================================================================================
ğŸ“Š KNN-1 (Conservative) SUMMARY
================================================================================
  Ground Truth (16 items):   11/16 (68.8%)
  Seeds Discovered:          8
  Text Chunks Used:          17
  Items Found: A1_model_mismatch, A2_payment_conflict, A3_customer_mismatch, B1_hall_call_gap, B2_door_height, B3_lock_added, B4_outdoor_term, B5_invoice_contradiction
               C1_url_malformed, C2_john_doe, C6_no_change_order

================================================================================
ğŸ”¬ Testing: KNN-2 (Relaxed)
================================================================================
  Group ID:         test-5pdfs-v2-knn-2
  K (neighbors):    5
  Similarity Cutoff: 0.75
  KNN Edges:        679


ğŸ“ Running Ground Truth Query...
   Query: Analyze the invoice and contract documents to find all inconsistencies...
   âœ… Route: route_4_drift_multi_hop
   âœ… Ground Truth: 10/16 items detected
   ğŸ“š Citations: 5
   ğŸ“„ Response length: 13860 chars

================================================================================
ğŸ“Š KNN-2 (Relaxed) SUMMARY
================================================================================
  Ground Truth (16 items):   10/16 (62.5%)
  Seeds Discovered:          5
  Text Chunks Used:          17
  Items Found: A1_model_mismatch, A2_payment_conflict, A3_customer_mismatch, B1_hall_call_gap, B2_door_height, B3_lock_added, B4_outdoor_term, B5_invoice_contradiction
               C2_john_doe, C6_no_change_order

================================================================================
ğŸ”¬ Testing: KNN-3 (Strict)
================================================================================
  Group ID:         test-5pdfs-v2-knn-3
  K (neighbors):    5
  Similarity Cutoff: 0.85
  KNN Edges:        590


ğŸ“ Running Ground Truth Query...
   Query: Analyze the invoice and contract documents to find all inconsistencies...
   âœ… Route: route_4_drift_multi_hop
   âœ… Ground Truth: 11/16 items detected
   ğŸ“š Citations: 5
   ğŸ“„ Response length: 17375 chars

================================================================================
ğŸ“Š KNN-3 (Strict) SUMMARY
================================================================================
  Ground Truth (16 items):   11/16 (68.8%)
  Seeds Discovered:          12
  Text Chunks Used:          17
  Items Found: A1_model_mismatch, A2_payment_conflict, A3_customer_mismatch, B1_hall_call_gap, B2_door_height, B3_lock_added, B4_outdoor_term, B5_invoice_contradiction
               C2_john_doe, C4_bayfront_site, C7_invoice_number

================================================================================
ğŸ“Š BENCHMARK RESULTS SUMMARY
================================================================================
Configuration             | Edges | GT/16 |   GT% | Cites
--------------------------------------------------------------------------------
Baseline (No KNN)         |     0 |    11 |   69% |     9
KNN-1 (Conservative)      |   408 |    11 |   69% |     3
KNN-2 (Relaxed)           |   679 |    10 |   62% |     5
KNN-3 (Strict)            |   590 |    11 |   69% |     5
================================================================================

ğŸ“ˆ ANALYSIS
--------------------------------------------------------------------------------
Best Ground Truth Coverage: Baseline (No KNN) (11/16 = 68.8%)

Baseline (V2 No KNN):       GT=11/16 (68.8%)
  vs KNN-1 (Conservative): GT 0 (11/16)
  vs KNN-2 (Relaxed)     : GT -1 (10/16)
  vs KNN-3 (Strict)      : GT 0 (11/16)

ğŸ¯ RECOMMENDATION
--------------------------------------------------------------------------------
KNN NEUTRAL: No improvement over baseline (11/16)
  â†’ KNN adds complexity without benefit for this query type

ğŸ’¾ Results saved to: bench_knn_results_20260201_131101.json
Completed: 2026-02-01 13:11:01
================================================================================
